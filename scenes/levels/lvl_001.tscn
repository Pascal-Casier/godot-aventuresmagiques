[gd_scene load_steps=16 format=3 uid="uid://c72v6h34la5ji"]

[ext_resource type="MeshLibrary" uid="uid://rdhq5wj52y0b" path="res://meshlibs/floorsMeshlib.tres" id="1_g23jj"]
[ext_resource type="PackedScene" uid="uid://cc33ysgujnadg" path="res://scenes/UI/ui.tscn" id="1_ke7g0"]
[ext_resource type="Shader" uid="uid://b6m35bkqytl76" path="res://scenes/shaders/WaterShader2.tres" id="2_eaf1l"]
[ext_resource type="MeshLibrary" uid="uid://5o4cu0yxnitt" path="res://meshlibs/TilesGrassAndDirtMeshlib.tres" id="2_iabn6"]
[ext_resource type="PackedScene" uid="uid://ctk8p4yd8qcek" path="res://scenes/characters/player.tscn" id="3_7jb3o"]
[ext_resource type="MeshLibrary" uid="uid://c2kpxx52kae10" path="res://meshlibs/Walls_stairsMeshlib.tres" id="3_gn4q7"]
[ext_resource type="PackedScene" uid="uid://d2u0uvf4kn6ug" path="res://scenes/mechanics/lift.tscn" id="3_r6g0i"]
[ext_resource type="PackedScene" uid="uid://bp6q7c30cqb3a" path="res://scenes/mechanics/door_gate.tscn" id="5_gmocl"]
[ext_resource type="PackedScene" uid="uid://dp5sdo13te42y" path="res://scenes/mechanics/button_floor.tscn" id="6_xexy3"]
[ext_resource type="PackedScene" uid="uid://dl83ir6e2pnkn" path="res://scenes/mechanics/spike_roller.tscn" id="7_wiep6"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_xq0tw"]
sky_horizon_color = Color(0.64625, 0.65575, 0.67075, 1)
ground_horizon_color = Color(0.64625, 0.65575, 0.67075, 1)

[sub_resource type="Sky" id="Sky_05crr"]
sky_material = SubResource("ProceduralSkyMaterial_xq0tw")

[sub_resource type="Environment" id="Environment_ss6gv"]
background_mode = 2
sky = SubResource("Sky_05crr")
tonemap_mode = 2
glow_enabled = true

[sub_resource type="QuadMesh" id="QuadMesh_l6mnw"]
size = Vector2(300, 300)
subdivide_width = 50
subdivide_depth = 50

[sub_resource type="ShaderMaterial" id="ShaderMaterial_rk664"]
render_priority = 0
shader = ExtResource("2_eaf1l")
shader_parameter/ColorParameter = Color(0, 0.266667, 0.533333, 1)

[node name="Lvl001" type="Node3D"]

[node name="UI" parent="." instance=ExtResource("1_ke7g0")]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_ss6gv")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.866023, -0.433016, 0.250001, 0, 0.499998, 0.866027, -0.500003, 0.749999, -0.43301, 0, 0, 0)
shadow_enabled = true

[node name="Gridmaps" type="Node3D" parent="."]

[node name="GridMapFloor" type="GridMap" parent="Gridmaps"]
mesh_library = ExtResource("1_g23jj")
data = {
"cells": PackedInt32Array(-65539, 65535, 8, -65539, 0, 8, -65539, 1, 8, -65539, 2, 8, -65539, 3, 8, -65539, 4, 8, -65539, 5, 8, -65539, 6, 8, -65538, 65535, 8, -65538, 0, 8, -65538, 1, 8, -65538, 2, 8, -65538, 3, 8, -65538, 4, 8, -65538, 5, 8, -65538, 6, 8, -65537, 65535, 8, -65537, 0, 8, -65537, 1, 8, -65537, 2, 8, -65537, 3, 8, -65537, 4, 8, -65537, 5, 8, -65537, 6, 8, -131072, 65535, 8, -131072, 0, 8, -131072, 1, 8, -131072, 2, 8, -131072, 3, 8, -131072, 4, 8, -131072, 5, 8, -131072, 6, 8, -131071, 65535, 8, -131071, 0, 8, -131071, 1, 8, -131071, 2, 8, -131071, 3, 8, -131071, 4, 8, -131071, 5, 8, -131071, 6, 8, -131070, 65535, 8, -131070, 0, 8, -131070, 1, 8, -131070, 2, 8, -131070, 3, 8, -131070, 4, 8, -131070, 5, 8, -131070, 6, 8, -3, 65535, 2, -3, 0, 2, -3, 1, 2, -3, 2, 2, -3, 3, 2, -3, 4, 2, -3, 5, 2, -3, 6, 2, -2, 65535, 2, -2, 0, 7, -2, 1, 655363, -2, 2, 2, -2, 3, 2, -2, 4, 1441794, -2, 5, 655367, -2, 6, 1441798, -1, 65535, 2, -1, 0, 2, -1, 1, 2, -1, 2, 2, -1, 3, 2, -1, 4, 2, -1, 5, 2, -1, 6, 2, -65536, 65535, 2, -65536, 0, 2, -65536, 1, 2, -65536, 2, 2, -65536, 3, 2, -65536, 4, 2, -65536, 5, 2, -65536, 6, 2, -65535, 65535, 2, -65535, 0, 2, -65535, 1, 2, -65535, 2, 2, -65535, 3, 1048583, -65535, 4, 1048579, -65535, 5, 2, -65535, 6, 3, -65534, 65535, 2, -65534, 0, 655366, -65534, 1, 2, -65534, 2, 655362, -65534, 3, 2, -65534, 4, 2, -65534, 5, 2, -65534, 6, 2)
}
metadata/_editor_floor_ = Vector3(0, -1, 0)

[node name="GridMapCubes" type="GridMap" parent="Gridmaps"]
mesh_library = ExtResource("2_iabn6")
cell_size = Vector3(2, 1, 2)
cell_center_x = false
cell_center_y = false
cell_center_z = false
data = {
"cells": PackedInt32Array(0, 4, 1048583, 0, 5, 1048582, 1, 5, 1048582, 2, 5, 1048582, 65535, 5, 1048582, 65534, 5, 1048582, 2, 6, 1048582, 1, 6, 1048582, 0, 6, 1048582, 65535, 6, 1048582, 65534, 6, 1048582, -196608, 11, 1048580, -65536, 11, 1048580, 65536, 11, 1048580, 196608, 11, 1048580, 196608, 12, 1048580, 196608, 13, 1048580, 196609, 13, 1048580, 327681, 13, 655367, 262146, 13, 655364, 262147, 13, 655364, 262147, 14, 655364, 262147, 15, 1441797, 262147, 16, 1441798, 262147, 17, 1441798, 262147, 20, 1441798, 262150, 20, 655366, 262151, 20, 655366, 262151, 19, 655366, 262152, 19, 655366, 262152, 20, 655366, 262152, 21, 655366, 262151, 21, 655366, 262153, 21, 655366, 262153, 20, 655366, 262153, 19, 655366, 262151, 22, 655366, 262152, 22, 1441798, 262153, 22, 655366, 262152, 23, 655366, 262152, 24, 655366, 262150, 19, 655366, 262150, 18, 655366, 262151, 18, 655366, 262152, 18, 655366, 262153, 18, 655366, 262154, 18, 655366, 262154, 19, 655366, 262154, 20, 655366, 262154, 21, 655366, 262154, 22, 655366, 262150, 21, 655366, 262150, 22, 655366, 262150, 26, 655360, 262151, 26, 655360, 262152, 26, 655360, 262153, 26, 655360, 262154, 26, 655360, 262150, 27, 655360, 262151, 27, 655360, 262152, 27, 655360, 262153, 27, 655360, 262154, 27, 655360, 262154, 28, 655360, 262153, 28, 655360, 262152, 28, 655360, 262151, 28, 655360, 262150, 28, 655360, 262152, 25, 1048577, 262150, 29, 1048576, 262151, 29, 1048576, 262152, 29, 1048576, 262153, 29, 1048576, 262154, 29, 1048576, 262150, 30, 1048576, 262151, 30, 1048576, 262152, 30, 1048576, 262153, 30, 1048576, 262154, 30, 1048576, 262150, 31, 1048576, 262151, 31, 1048576, 262152, 31, 1048576, 262153, 31, 1048576, 262154, 31, 1048576, 262150, 32, 1048576, 262150, 33, 1048576, 262150, 34, 1048576, 262151, 34, 1048576, 262152, 34, 1048576, 262152, 33, 1048576, 262152, 32, 1048576, 262151, 32, 1048576, 262151, 33, 1048576, 262153, 32, 1048576, 262153, 33, 1048576, 262154, 32, 1048576, 262154, 33, 1048576, 262154, 34, 1048576, 262153, 34, 1048576, 131078, 26, 1048580, 131078, 27, 1048580, 131078, 28, 1048580, 131078, 29, 1048580, 131078, 30, 1048580, 131078, 31, 1048580, 131078, 32, 1048580, 131078, 33, 1048580, 131079, 26, 1048580, 131079, 27, 1048580, 131079, 28, 1048580, 131079, 29, 1048580, 131079, 30, 1048580, 131079, 31, 1048580, 131079, 32, 1048580, 131079, 33, 1048580, 131080, 26, 1048580, 131080, 27, 1048580, 131080, 28, 1048580, 131080, 29, 1048580, 131080, 30, 1048580, 131080, 31, 1048580, 131080, 32, 1048580, 131080, 33, 1048580, 131081, 26, 1048580, 131081, 27, 1048580, 131081, 28, 1048580, 131081, 29, 1048580, 131081, 30, 1048580, 131081, 31, 1048580, 131081, 32, 1048580, 131081, 33, 1048580, 6, 26, 1048580, 6, 27, 1048580, 6, 28, 1048580, 6, 29, 1048580, 6, 30, 1048580, 6, 31, 1048580, 6, 32, 1048580, 6, 33, 1048580, 7, 26, 1048580, 7, 27, 1048580, 7, 28, 1048580, 7, 29, 1048580, 7, 30, 1048580, 7, 31, 1048580, 7, 32, 1048580, 7, 33, 1048580, 8, 26, 1048580, 8, 27, 1048580, 8, 28, 1048580, 8, 29, 1048580, 8, 30, 1048580, 8, 31, 1048580, 8, 32, 1048580, 8, 33, 1048580, 9, 26, 1048580, 9, 27, 1048580, 9, 28, 1048580, 9, 29, 1048580, 9, 30, 1048580, 9, 31, 1048580, 9, 32, 1048580, 9, 33, 1048580, 6, 34, 1048580, 7, 34, 1048580, 8, 34, 1048580, 9, 34, 1048580, 10, 34, 1048580, 10, 33, 1048580, 131082, 34, 1048580, 131081, 34, 1048580, 131080, 34, 1048580, 131079, 34, 1048580, 131078, 34, 1048580, 131082, 33, 1048580, 131082, 32, 1048580, 131082, 31, 1048580, 131082, 30, 1048580, 131082, 27, 1048580, 131082, 26, 1048580, 131082, 28, 1048580, 131082, 29, 1048580, 10, 32, 1048580, 10, 31, 1048580, 10, 30, 1048580, 10, 29, 1048580, 10, 28, 1048580, 10, 27, 1048580, 10, 26, 1048580, -131066, 26, 1048580, -131066, 27, 1048580, -131066, 28, 1048580, -131066, 29, 1048580, -131066, 30, 1048580, -131066, 31, 1048580, -131066, 32, 1048580, -131066, 33, 1048580, -131066, 34, 1048580, -131065, 26, 1048580, -131065, 27, 1048580, -131065, 28, 1048580, -131065, 29, 1048580, -131065, 30, 1048580, -131065, 31, 1048580, -131065, 32, 1048580, -131065, 33, 1048580, -131065, 34, 1048580, -131064, 26, 1048580, -131064, 27, 1048580, -131064, 28, 1048580, -131064, 29, 1048580, -131064, 30, 1048580, -131064, 31, 1048580, -131064, 32, 1048580, -131064, 33, 1048580, -131064, 34, 1048580, -131063, 26, 1048580, -131063, 27, 1048580, -131063, 28, 1048580, -131063, 29, 1048580, -131063, 30, 1048580, -131063, 31, 1048580, -131063, 32, 1048580, -131063, 33, 1048580, -131063, 34, 1048580, -131062, 26, 1048580, -131062, 27, 1048580, -131062, 28, 1048580, -131062, 29, 1048580, -131062, 30, 1048580, -131062, 31, 1048580, -131062, 32, 1048580, -131062, 33, 1048580, -131062, 34, 1048580, 131075, 20, 1048580, 3, 20, 1048580, -131069, 20, 1048580, 131075, 17, 1048580, 131075, 16, 1048580, 131075, 15, 1048580, 131075, 14, 1048580, 131075, 13, 1048580, 131074, 13, 1048580, 131073, 13, 1048580, 131072, 12, 1048580, 131072, 13, 1048580, 3, 13, 1048580, -131069, 13, 1048580, 3, 17, 1048580, -131069, 17, 1048580, 0, 13, 1048580, -131072, 13, 1048580, 131078, 22, 1048580, 6, 22, 1048580, -131066, 22, 1048580, 131078, 18, 1048580, 6, 18, 1048580, -131066, 18, 1048580, 131082, 22, 1048580, 10, 22, 1048580, -131062, 22, 1048580, 131082, 18, 1048580, 10, 18, 1048580, -131062, 18, 1048580, -131065, 37, 1048580, 7, 37, 1048580, 131079, 37, 1048580, 262151, 37, 1048580, 262152, 37, 1048580, 262153, 37, 1048580, 131081, 37, 1048580, 9, 37, 1048580, -131063, 37, 1048580)
}
metadata/_editor_floor_ = Vector3(0, -2, 0)

[node name="GridMapWalls" type="GridMap" parent="Gridmaps"]
mesh_library = ExtResource("3_gn4q7")
cell_size = Vector3(2, 1, 2)
cell_center_x = false
cell_center_y = false
cell_center_z = false
data = {
"cells": PackedInt32Array(262152, 22, 655384, 262154, 22, 1441811, 262150, 22, 655379, 262150, 18, 1048595, 262154, 18, 19, 262154, 20, 1441821, 262152, 18, 655389, 327686, 27, 1048576, 327690, 27, 1048576, 327690, 33, 1048576, 327686, 33, 1048576, 327690, 30, 1048576, 327686, 30, 1048576)
}
metadata/_editor_floor_ = Vector3(0, 5, 0)

[node name="objects" type="Node3D" parent="."]

[node name="Lift" parent="objects" instance=ExtResource("3_r6g0i")]
transform = Transform3D(-1, 0, 8.74228e-08, 0, 1, 0, -8.74228e-08, 0, -1, 0, 0, 11.9369)
position_final = Vector3i(0, 4, -8)

[node name="door_gate" parent="objects" instance=ExtResource("5_gmocl")]
transform = Transform3D(-1, 0, 8.74228e-08, 0, 1, 0, -8.74228e-08, 0, -1, 17.0233, 4.08887, 43.9507)

[node name="button_floor" parent="objects" instance=ExtResource("6_xexy3")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 15.8021, 4.00471, 40.7798)

[node name="SpikeRoller" parent="objects" instance=ExtResource("7_wiep6")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 13.8371, 5, 53.9763)

[node name="SpikeRoller2" parent="objects" instance=ExtResource("7_wiep6")]
transform = Transform3D(-4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, 13.8371, 5, 59.9763)

[node name="SpikeRoller3" parent="objects" instance=ExtResource("7_wiep6")]
transform = Transform3D(-1, 0, 8.74228e-08, 0, 1, 0, -8.74228e-08, 0, -1, 17.8371, 5, 58.814)

[node name="SpikeRoller4" parent="objects" instance=ExtResource("7_wiep6")]
transform = Transform3D(-1, 0, 8.74228e-08, 0, 1, 0, -8.74228e-08, 0, -1, 18.2578, 5, 65.9763)

[node name="Npcs" type="Node3D" parent="."]

[node name="Water" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, 0, -1.30729, 0)
mesh = SubResource("QuadMesh_l6mnw")
surface_material_override/0 = SubResource("ShaderMaterial_rk664")

[node name="Player" parent="." instance=ExtResource("3_7jb3o")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 15.9126, 3.99146, 46.1314)
